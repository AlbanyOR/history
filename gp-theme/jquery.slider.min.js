/*!
* jQuery slider plugin v1
* http://
*
* Copyright (C) 2013 Gennady Pugachevsky
*
*/
(function(b){var c={min:0,max:100,cur:50,$bar:null,$handle:null,direction:"y",limits:{}},a={__construct:function(d){this.data("sliderOptions",b.extend(c,d));var e=this.data("sliderOptions");e.$bar=b('<div class="slider-bar" />');e.$handle=b('<a class="slider-handle">L</a>');this.append(e.$bar).append(e.$handle);a._setDimentions.call(this);var f=this;e.$handle.draggable({limits:e.limits}).bind("dragged",function(){a._onSliderDrag.call(f)});a.enable.call(this);return this},enable:function(){var e=this,d=this.data("sliderOptions");this.bind("click.slider",function(f){var g=b(this).offset();a._onBarUpdate.call(e,{left:f.pageX-g.left,top:f.pageY-g.top})});d.$handle.draggable("enable");return this},disable:function(){var d=this.data("sliderOptions");this.unbind("click.slider");d.$handle.draggable("disable");return this},_setDimentions:function(){var j=this.data("sliderOptions"),f={},d=parseInt(this.css("width")),i=parseInt(this.css("height")),l,g,k,e;if(j.direction=="y"){j.handleOffset=j.$handle.outerWidth()/2;l=g=d/2-j.$handle.outerWidth()/2;k=-j.$handle.outerHeight()/2;e=i-j.$handle.outerHeight()/2;j.$handle.css("left",l);j.$bar.css({height:i,left:d/2-j.$bar.outerWidth()/2})}else{j.handleOffset=j.$handle.outerHeight()/2;k=e=i/2-j.$handle.outerHeight()/2;l=-j.$handle.outerWidth();g=d-j.$handle.outerWidth();j.$handle.css("top",k);j.$bar.css({width:d,top:i/2-j.$bar.outerHeight()/2})}j.limits={left:l,top:k,right:g,bottom:e};a.set.call(this,{cur:j.cur})},_onBarUpdate:function(e){var f=this.data("sliderOptions"),d=a._getKeys(f);f.$handle.css(d[0],Math.min(f.limits[d[1]],Math.max(f.limits[d[0]],e[d[0]]-f.handleOffset)));a._onSliderDrag.call(this)},_getKeys:function(d){return d.direction=="y"?["top","bottom"]:["left","right"]},_onSliderDrag:function(){var e=this.data("sliderOptions"),d=a._getKeys(e),f=e.min+(parseInt(e.$handle.css(d[0]))-e.limits[d[0]])/(e.limits[d[1]]-e.limits[d[0]])*(e.max-e.min);this.trigger("change",[f])},reset:function(d){this.data("sliderOptions",b.extend(this.data("sliderOptions"),d));a._setDimentions.call(this);return this},set:function(e){var f=this.data("sliderOptions"),d=a._getKeys(f),g=f.limits[d[0]]+(e.cur-f.min)/(f.max-f.min)*(f.limits[d[1]]-f.limits[d[0]]);f.$handle.css(d[0],g);return this}};b.fn.slider=function(e,d){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return a.__construct.apply(this,arguments)}else{b.error("Method "+e+" does not exist on jQuery.slider")}}}})(jQuery);